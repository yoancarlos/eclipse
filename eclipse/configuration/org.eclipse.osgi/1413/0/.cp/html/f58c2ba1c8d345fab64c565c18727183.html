<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="abstract" content="Execute a local integration process in a loop."/>
<meta name="description" content="Execute a local integration process in a loop."/>

<link rel="stylesheet" type="text/css" href="../css/documentation.css"/>
<title>Define Looping Process Call</title>
<!--[if lte IE 7]><style>
      .codeblock{
          overflow:visible;
      }</style><![endif]-->
</head>
<body class="" id="loiof58c2ba1c8d345fab64c565c18727183">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Define
		Looping Process Call</h1>

	
	<div class="body taskbody"><p class="shortdesc">Execute a local integration process in a loop. </p>

		<div class="section context"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Context</h2></div></div>
		<div class="ol steps tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand">
				<span class="ph cmd">In the palette, choose <span class="ph menucascade"><img src="../images/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"/> <span class="ph uicontrol">Call</span> <img src="../images/navstep.gif" alt="Next navigation step" title="Next navigation step"/> <span class="ph uicontrol">Local Call</span> <img src="../images/navstep.gif" alt="Next navigation step" title="Next navigation step"/> <span class="ph uicontrol">Looping Process Call</span> <img src="../images/navend.gif" alt="End of the navigation path" title="End of the navigation path"/></span>.</span>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">Click somewhere inside the <span class="ph uicontrol">Integration Process</span> box of the
					integration flow model.</span>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">Specify the following attributes.</span>
				<div class="itemgroup info">
					<div class="p">
            
<div class="table-wrapper tablenoborder"><table summary="" id="loiof58c2ba1c8d345fab64c565c18727183__d3816e15" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1: </span></caption>
<colgroup><col width="50%"/><col width="50%"/></colgroup>

                    
                    
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" width="50%" id="d5258470e70">
                                <p class="p">Field</p>

                            </th>

                            <th class="entry" valign="top" width="50%" id="d5258470e76">
                                <p class="p">Description</p>

                            </th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry" valign="top" width="50%" headers="d5258470e70 ">
                                <p class="p"><span class="ph uicontrol">Expression Type</span></p>

                            </td>

                            <td class="entry" valign="top" width="50%" headers="d5258470e76 ">
                                <p class="p">Specify the kind of expression you want to enter in the
                                        <span class="ph uicontrol">Condition Expression</span> field.</p>

                                <p class="p">You have the following options: </p>

                                <ul class="ul" id="loiof58c2ba1c8d345fab64c565c18727183__d3816e65">
                                    <li class="li">
                                        <p class="p"><span class="ph uicontrol">XML</span>
                                        </p>

                                        <p class="p">For XPath expressions, for example:
                                                <samp class="ph codeph">//customerName = ‘Smith’</samp></p>

                                    </li>

                                    <li class="li">
                                        <p class="p"><span class="ph uicontrol">Non-XML</span></p>

                                        <p class="p">For Camel Simple Expression Language</p>

                                        <div class="note note"><span class="notetitle">Note</span> 
                                            <p class="p">Examples:</p>

                                            <p class="p"><samp class="ph codeph">${header.SenderId}</samp>, which indicates
                                                the SenderId header field. </p>

                                            <p class="p"><samp class="ph codeph">${in.body}</samp>, which indicates the body
                                                of the incoming message.</p>

                                        </div>

                                        <p class="p">For more information about Camel Simple Expression
                                            Language, see: <a class="extlink" href="http://help.sap.com/disclaimer?site=http://camel.apache.org/simple.html" target="_blank" alt="http://camel.apache.org/simple.html" title="http://camel.apache.org/simple.html">http://camel.apache.org/simple.html<img src="../images/3rd_link.png" class="link-external" alt="Information published on non-SAP site" title="Information published on non-SAP site" border="0"/></a>.</p>

                                    </li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="50%" headers="d5258470e70 ">
                                <p class="p"><span class="ph uicontrol">Condition</span></p>

                            </td>

                            <td class="entry" valign="top" width="50%" headers="d5258470e76 ">
                                <p class="p">Enter the condition (XML or Non-XML, as specified by the property
                                        <span class="ph uicontrol">Expression Type</span>).</p>

                                <p class="p">Do not use a mixed expression (containing both XML and Non-XML
                                    expressions).</p>

                                <p class="p">For more information about the usage of operators, see <a class="xref" href="3ae001c5f6344ee79eff0120daf5f596.html">Defining Router</a></p>
</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="50%" headers="d5258470e70 ">
                                <p class="p"><span class="ph uicontrol">Max. Number of Iterations</span></p>

                            </td>

                            <td class="entry" valign="top" width="50%" headers="d5258470e76 ">
                                <p class="p">Maximum number of iterations that the loop can perform before it
                                    stops (99999 iterations maximum). </p>

                                <p class="p">You can use this setting to prevent a never-ending loop.</p>

                            </td>

                        </tr>

                    </tbody>

                </table>
</div>

        </div>

				</div>
				<div class="itemgroup info"><p class="p">Example Scenario for the Local Loop Process.</p>
<div class="note note"><span class="notetitle">Note</span> 
                <p class="p">The local loop process refers to a <samp class="ph codeph">while</samp> loop. The sub process
                    will run as long as the loop condition is fulfilled.</p>

            </div>
<p class="p">To explain how a local loop process works, we provide a simple
                example.</p>
<div class="p">Every morning, an account owner wants to check all transactions
                performed on his account. He calls a specific web service and has defined this
                request:<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;accountID&gt;12345&lt;accountID&gt;
&lt;action&gt;Transaction_of_last_Day&lt;/action&gt;
&lt;/accountinfo&gt;</pre></div>
</div>
<div class="p">The
                appropriate response for this request
                is:<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;accountinforesponse&gt;
    &lt;transaction&gt;
        &lt;id&gt;1&lt;/id&gt;
...
    &lt;/transaction&gt;
...
    &lt;transaction&gt;
        &lt;id&gt;55&lt;/id&gt;
...
    &lt;/transaction&gt;
    &lt;hasMore&gt;true&lt;/hasMore&gt;
&lt;/accountinforesponse&gt;

</pre></div>
The
                account owner has to call the web service again and again until there are no more
                transactions available and he gets the response:
                <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;hasMore&gt;false&lt;/hasMore&gt;</pre></div>
 To simplify the call, he
                can use the loop embedded in the HCP Integration Service. He needs to define a
                    <samp class="ph codeph">while</samp> condition in the Xpath such as<samp class="ph codeph">
                    /accountinforesponse[hasMore=true]</samp>.</div>
<p class="p"> As long as data are
                available, the call will continue. The sub-process inducing the loop uses the
                ServiceCall step in the Request-Reply mode to call the web service. As soon as the
                web service gets the response <samp class="ph codeph">&lt;hasMore&gt;false&lt;/hasMore&gt;</samp>,
                the processing exits the loop and continues with the next step. The last response of
                the web service is the new payload, that will be taken as message body into the next
                step.</p>
<img class="image" id="loiof58c2ba1c8d345fab64c565c18727183__d3816e199" src="loiod68ce95e90ae41a4b2feee8e9ad8b2e5_LowRes.png"/></div>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">Save and deploy the integration flow.</span>
			</li>
</ol>

	</div>

	<div class="related-links"> 
<div class="relinfo"><div class="relinfotitle ">Related Information</div>
<div><a class="link" href="520341af123a4c2b89796e033e9fd31d.html" title="You use the local integration process to simplify your integration process. You can break down the main integration process into smaller fragments by using local integration processes. You combine these fragments to achieve your main integration process.">Define Local Integration Process</a></div>
</div>
</div>
</div></div><div class="footer" id="custom-footer">
	<div id="custom-footerSpacer"><hr width="350px" align="left"/></div>
	<a class="copyright" href="copyright.html">Copyright</a><span class="separator"> | </span><a class="disclaimer" href="disclaimer.html">Important Disclaimers and Legal Information</a>
</div>

</body>
</html>